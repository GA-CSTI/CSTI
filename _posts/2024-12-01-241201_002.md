---
layout: single
title: "북스터디 - 대규모 시스템 설계 기초"
categories: 북스터디
tag: [북스터디, 확장성]
toc: true
---

# "1장 사용자 수에 따른규모 확장성"

## 단일서버
```
1. 시스템에서의 사용자 요청 처리 흐름
 1) 사용자가 도메인 이름을 이용하여 웹사이트 접속
 2) 도메인 이름을 도메인 이름 서비스(DNS)에 질의하여 IP주소로 변환하는 과정 필요
 3) DNS는 보통 제3사업자(THIRD PARTY)가 제공하는 유료 서비스 이용
 4) DNS 조회 결과로 IP주소 반환
 5) 그 주소가 웹 서버의 주소이다.
 6) 해당 IP주소로 HTTP요청이 전달
 7) HTML페이지나 JSON형태의 응답을 반환

2. 웹 앱
 1) 비즈니스 로직, 데이터 저장등을 처리하기 위해 서버구현용 언어(자바,파이썬 등)을 사용
 2) 프레젠테이션용으로는 클라이언트 구현용 언어(HTML,자바스크립트 등)을 사용

3. 모바일 앱
 1) 모바일 앱과 웹 서버 간 통신을 위해 HTTP프로토콜을 이용
 2) 응답 데이터의 포맷으로는 보통 JSON이 간결하여 널리 쓰임
```
<br>

## 데이터베이스
```
> 사용자가 늘면 서버하나로 충분하지 않아 여러 서버를 두어야 한다.

1.웹/모바일 트래픽 처리용
 1) 웹/모바일 트래픽 처리 서버(웹 계층)

2. 데이터베이스용
 1) 데이터베이스 서버(데이터 계층)

3.데이터베이스의 유형
 1) 관계형 데이터베이스
  (1) 관계형 데이터베이스 관리 시스템(RDBMS)
　(2) MySQL, 오라클 데이터베이스, PostgreSQL 등이 해당
　(3) 자료를 테이블과 열, 컬럼으로 표현
　(4) SQL을 사용하면 여러 테이블에 있는 데이터를 그 관계에 따라 조인하여 합칠수 있다.
　(5) 40년 이상 시장에서 살아남아 잘 사용되어 온 시스템

 2) 비관계형 데이터베이스
  (1) NoSQL
　(2) CouchDB, Neo4j, Cassandre, HBase, Amazon DynamoDB등이 해당
　(3) NoSQL의 네 부류
　  a. 키-값 저장소
　  b. 그래프 저장소
　  c. 컬럼 저장소
　  d. 문서 저장소
  (4) 비-관계형 데이터베이스는 일반적으로 조인 연산은 지원하지 않는다.

 3) 비-관계형 데이터베이스가 적절한 경우
  (1) 아주 낮은 응답 지연 시간
  (2) 다루는 데이터가 비정형이라 관계형 데이터가 아님
  (3) 데이터 (JSON, YAML, XML등)를 직렬화하거나 역직렬화 할수 있기만 한 경우
  (4) 아주 많은 양의 데이터 저장
```
<br>

## 수직적 규모 확장 vs 수평적 규모 확장
```
1.수직적 규모 확장 (스케일 업)
 1) 서버에 고사양 자원(더 좋은 CPU, 더 많은 RAM등)을 추가
 2) 서버로 유입되는 트래픽의 양이 적을때
 3) 장점
   - 단순함
 4) 단점
   - 수직적 규모 확장의 한계
　 - 한 대의 서버에 CPU나 메모리를 무한대로 증설할 방법은 없다.
　 - 장애에 대한 자동복구 방안이나 다중화 방안은 제시하지 않는다.
　 - 서버 장애 발생 시 웹사이트/앱은 완전히 중단된다.
　 - 트래픽 증가 시 응답속도가 느려지거나 서버 접속이 불가

2.수평적 규모 확장(스케일 아웃)
 1) 더 많은 서버를 추가하여 성능을 개선
 2) 서버로 유입되는 트래픽의 양이 적을때
 3) 대규모 애플리케이션을 지원하는데 유리
  
3.로드밸런서
 1) 부하 분산 집합에 속한 우베 서버들에게 트래픽 부하를 고르게 분산하는 역할
 2) 로드밸런서 사용 시 사용자 요청 처리 흐름
  (1) 사용자는 로드밸런서의 공개 IP주소로 접속(웹 서버는 클라이언트의 접속을 직접 처리하지 않음)
　(2) 보안을 위해 서버 간 통신에는 사설 IP주소를 사용
　　 - 사설IP : 같은 네트워크에 속한 서버 사이의 통신에만 쓰일 수 있는 IP주소
　(3) 부하 분산 집합에 또 하나의 웹 서버를 추가하면 장애를 자동복구하지 못하는 문제는 해소되고 웹 계층의 가용성 향상
　　 a. 서버1 다운 시 모든 트래픽은 서버 2로 전송
　　 b. 웹 사이트 전체가 다운되는 일이 방지됨
　　 c. 부하를 나누기 위해 새로운 서버를 추가할수도 있음
```
<br>

## 데이터베이스 다중화
```
1.주-부 관계를 설정
2.데이터 원본은 주 서버에, 사본은 부 서버에 저장
3.쓰기 연산은 마스터에서만 지원
4.부 데이터베이스는 읽기 연산만 지원
5.데이터베이스를 변경하는 명령어들(insert,dalete,update등)은 주 데이터베이스로만 전달
6.대부분의 애플리케이션은 읽기연산의 비중이 쓰기 연산보다 훨씬 높음
7.통상적으로 부 데이터베이스의 수가 주 데이터베이스의 수보다 많음
8.데이터베이스 다중화의 이점
　1) 더 나은 성능
　　(1) 모든 데이터 변경 연산은 주 데이터베이스 서버로만 전달되는 반면 읽기 연산은 부 데이터베이스 서버들로 분산
　　(2) 병렬로 처리될 수 있는 질의의 수가 늘어나므로 성능이 좋아진다.
　2) 안정성
　　(1) 데이터베이스 서버 가운데 일부가 파괴되어도 데이터는 보존
　　(2) 데이터를 지역적으로 떨어진 여러 장소에 다중화시켜 놓을수 있음
　3) 가용성
　　(1) 데이터를 여러 지역에 복제해 둠으로써, 하나의 데이터베이스 서버에 장애가 발생하더라도 다른 서버에 있는 데이터를 가져와 계속 서비스를 할 수 있음
```

## 메모
```
컴포넌트 : 프로그래밍에 있어 재사용이 가능한 각각의 독립된 모듈을 뜻한다.
```
---
layout: single
title: 자바 9 Features 와 기타
categories: TIL
tag: [Today I Learned]
toc: true
toc_sticky: true
author_profile: false
sidebar:
    nav: "docs"
search: true
sidebar:
    nav: "counts"
typora-root-url: ../
---

  

오늘 학습은 자바 9의 **Features(기능과 변경사항)**에 대해 학습합니다.

## 자바 9 Features

자바 8과 자바 9로 변경되면서 많은 변화가 생겼습니다. 가장 눈에 띄는 단어는 **모듈**입니다. 

> 모듈은 자바 9에서 도입된 개념으로, 여러 코드가 모인 독립적인 구성 요소를 의미합니다. 비슷한 역할을 하는 코드들을 모아 유지보수성을 높이고, 각 모듈 간의 의존성을 제어하여 더 안전한 개발을 가능하게 합니다. 모듈을 사용하면 코드의 구조를 체계적으로 관리할 수 있으며, 필요에 따라 모듈 단위로 분리하고 통합할 수 있습니다.

생각해보면 자바 17을 사용하거나 21을 사용해도 모듈을 별도로 사용한 기억이 없습니다.

그냥 `import`를 통해서 사용하다 보면 패키지가 다르네? 정도로 생각했지 모듈 시스템을 사용하고 있다는 걸 명시적으로 확인한 적이 없었습니다.  

기존에는 빌드 툴인 `Gradle`이나 `Maven`을 통해서 프로젝트의 코드를 여러 모듈로 나누고 각 모듈끼리 연관 관계를 설정할 수 있습니다.

```
//plugins {
//    id 'java'
//}
plugins {
    id 'java-library'
}

group = 'tobyspring'
version = '1.0-SNAPSHOT'

repositories {
    mavenCentral()
}

dependencies {
//    implementation(project(":con-domain"))
    api(project(":con-domain")) 
    testImplementation platform('org.junit:junit-bom:5.10.0')
    testImplementation 'org.junit.jupiter:junit-jupiter'
}

test {
    useJUnitPlatform()
}
```

1. **plugins.id['java'] - implementation(project)** : 손님 > 커피 가게 > 커피 머신 관계입니다.

   ```
   // Machine.module
   // Coffee.module
   implementation(project(":Machine"))
   // Consumer.module
   implementation(project(":Coffee"))
   // Consumer not existing Machine
   ```

   커피 가게는 커피 머신을 사용하여 커피를 내립니다.

   손님은 커피를 마시기 위해 커피 가게를 의존하지만 커피 머신은 사용할 수 없습니다.

   + 손님 ->  커피 가게 , 커피 가게 -> 커피머신 : OK
   + 손님 -> 커피머신 : NOPE

2. **plugins.id['java-library'] - api(project)** : 손님 > 무한 리필고기 가게 > 삼겹살관계입니다.

   ```java
   //Beef.module
   //Store.module
   api(project(":Beef")) 
   //Consumer.module
   api(project(":Store")) 
   ```

   무한 고기 리필집은 삼겹살을 의존합니다.

   손님은 삼겹살을 먹고싶어 무한 고기 리필집을 갑니다.

   손님은 무한 리필고기집에 가서 삼겹살을 직접 가져와서 구울 수 있습니다.

### JPMS vs Gradle module

JPMS는 자바 플랫폼 모듈 시스템이라고 하며 빌드 툴의 모듈 방식과 어떤 차이가 있는지 알아야 합니다.

먼저 JPMS을 사용하는 목적은 패키지보다 상위 단계의 집합(`aggragtion`)을 추가할 수 있습니다. Java의 추가된 신규 핵심 언어 요소로 상호 관련성이 높은, 재사용 가능한 패키지 및 리소스(이미지,XML 파일 등)들을 한데 묶어서 지칭하는 명칭입니다.

모듈 디스크립터(`module descriptor`)에는 다음과 같은 정보가 담겨있습니다.

> [자바 모듈 이해하기](https://www.oracle.com/kr/corporate/features/understanding-java-9-modules.html)

1. JPMS을 사용하면 빌드 툴 없이 모듈 구성이 가능하다.  
   처음에 어렵게 생각했습니다. 다시 생각해보면 **상호 관련성이 높은 재사용 가능한  집합**이라 생각하면 됩니다.
   JPMS의 "모듈" 설정과 빌드툴 "모듈" 설정을 함께 사용할 수 있습니다.
2. 더 세밀한 접근 제어가 가능합니다.  
   **강력한 캡슐화**가 가능해집니다. 모듈 내의 패키지는 모듈이 명시적으로 `export` 로 내보내는 경우에만 다른 모듈에서 사용이 가능해집니다.   
   예를 들어, store 모듈에는 org.store.order 패키지만 노출하여 주문만 가능하도록 설정할 수 있고 내부 DTO나 메서드에 접근할 수 없습니다.




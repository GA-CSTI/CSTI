---
layout: post
title:  "임베디드 시스템"
---
# 2024학년도 2학기

임베디드 시스템 : 개념, 하드웨어

"임베디드 시스템은 특수한 목적을 위해 만들어짐"

임베디드 시스템이란 "특수한 목적"에 대한 기능을 제공하기 위하여 하드웨어와 소프트웨어가 내장된 전자 제어 시스템

임베디드 시스템 : 시스템의 프로그램을 ROM이나 플래시메모리에 저장

임베디드 프로그래밍 : 동작하는데  필요한 모든 사항을 제어

범용컴퓨터 : 운영체제나 응용 프로그램을 하드디스크 등의 보조기억장치에 저장했다가 필요한 경우 RAM에 복사해서 실행

Embedded : "내장되어 있는', "포함되어 있는"

사람이 제품의 동작에 개입하지 않으면서 사용자의 요구를 수행하기 위한 시스템


임베디드 시스템의 종류

- 그래픽 사용자 인터페이스(GUI)를 위한 입출력 장치의 유뮤에 따라 구분
- 헤드풀 :  입력장치를 가지고 있는 시스템 (ex)ATM, 키오스크, 셋톱박스)
- 헤드리스 : GUI를 위한 입출력장치가 없음 (ex)IoT의 사물

임베디드 시스템의 구성요소
- 컴퓨터의 내부 구성 : CPU + 메모리 + 하드디스크
- 임베디드 시스템의 구성 : CPU + 메모리
- CPU는 메모리에 일하러 간다, 메모리는 데이터가 존재하는 곳

임베디드시스템 소프트웨어는 "임의", "단독", "개별적" 으로 동작 X

임베디드는 하드웨어와 소프트웨어가 타이트하게 연결

Porting : 하드웨어에 소프트웨어를 깔아준다. 하드웨어가 달라지면 동작하지 않는다.

임베디드시스템 소프트웨어의 특징

독립성 : 하드웨어와 호환성이 매우 적음 = "PORTING" 해야됨, 하드웨어에 대해 최적화된 프로그램을 만들 수 있는 장점

무결성 : 사람이 관여하지않고 스스로 제어 하도록 설계, 오류없이 완벽한 동작이 이루어지도록 보장

실시간 제어 : 시스템을 동작시키는데 정확한 시간 제어가 필요

최적화 : 시스템 자원에 대한 최적화 필요, 프로그램의 구조가 단순해야 함

임베디드시스템에서 사용하는 운영체제

1) 운영체제가 없는 임베디드 시스템
    - 해당 기기의 목적에만 충실하도록, 간단한 시스템
2) 운영체제가 있는 임베디드 시스템
    - 하나의 제품에 다기능이 탑재된 경우
    - 2가지 타입
      - 1번째, 실시간 운영체제 : RTOS, 반드시 porting 필요로 비쌈
      - 2번째, 임베디드 리눅스 : 개발 비용이 저렴, 안정성이 떨어짐


임베디드 제품 개발 과정
1) CPU, Memory, 기타 주변 장치 선정
2) CAD로 회로 그리기
3) Artwork
4) PWB
5) 부품 장착
6) 디버깅
7) 회로도 수정
8) 양산 테스트
9) 품질 검사
10) 규격 검사 및 제품 출하

클럭 신호 

- 회로의 장치들이 동작을 하기 위해서 Rising edge나 Falling edge를 공급해 주는 역할
- 오실레이터 & 크리스털 ( 둘 다 클럭 신호를 발생시키는 장치 )
- 이실레이터는 스스로 클럭 신호를 발생, 조금 더 고급
- 크리스털은 두 개의 연결 핀을 가지고 있으며, 주변 회로가 필요, 저가 장치

====================================================
3주차 : CPU and Memory

CPU : 중앙처리장치

시스템 전체를 제어하고 관리하는 역할, 프로그램의 연산을 실행하고 처리

임베디드시스템의 CPU : 다양한 입력 방법에 의해 주어진 데이터를 받아서 처리한 후, 그 결과 데이터를 이용하여 해당 시스템의 목적에 맞는 동작이나 결과를 내도록 하는 장치

제어장치(CU), 연산 장치(ALU), 레지스터(Register)

MPU(Micro Processing Unit) : CPU와 비슷
- 소형 처리 장치, 처리 중심
- MPU단독으로 존재, RAM ROM I/O 등의 장치가 필요

 MCU(Micro Controller Unit) 
- 소형 제어 자이, 디바이스 제어를 목적
- 낮은 사향에 사용, MPU에 I/O와 메모리를 결합한 형태로 한 칩에 모든 기능을 넣음

프로세서 : 일반적으로 연산에 비중이 높은 고성능의디바이스 ( MPU ), 주로 32/64 bit
컨트롤러 : 일반적으로 제어에 비중이 높은 디바이스( MCU ), 주로 8/16 bit

RISC CPU & CISC CPU
RISC(Reduced Instrution Set Computer)
- 사용 빈도가 높은 명령어만을 탑재하여 처리속도를 향상시킨 프로세서
- 간단하고 길이가 고정된 명령어 집합을 젝
- S/W 복잡도 증가 -> 컴파일러 작성이 어려움
CISC(Complex Instrution Set Computer)
- 연산에 처리되는 복잡한 명령어들을 다수 탑재하고 있는 프로세서
- 복잡하고 길이가 가변적인 명령어 집하을 제공, CPU안에 다 저장되어 있다.
- H/W 복잡도 증가 -> 컴파일러 작성이 쉬움

Memory

ROM( Read Only Memory)
- 읽기전용, 외부전원 없이도 내용이 유지되는 비휘발성 메모리
- MASKED : 제품 제조/ 생산시 메모리에 내용을 기록 하는 형태, 한번 기록하면 삭제나 재 기록이 불가능
- PROM : 최초 제조/생산 시 메모리가 비어 있고, 단 한번 기록 가능, 이후 수정 불가능
- EPROM : 재기록 가능, 지울떄 전용 장치 사용
- EEPROM : 전기 신호를 이용하여 데이터를 지우기 가능

- 마이크로프로세서는 ROM으로 부터 프로그램 명령어들을 읽음
- 마이크로프로세서는 ROM에 새로운 데이터를 저장할 수 없음
- 전원이 꺼져도 데이터를 기억하고 켜질 때, ROM으로부터 프로그램을 가져오기 시작함



RAM( Random Access Memory)
- 임의접근방식에 읽기/쓰기 메모리로 휘발성 메모리, ROM보다 매우 빠름
- DRAM : 저장된 내용을 유지하기 위해 일정 간격으로 반드시 Refresh가 필요, 메인 메모리에 주로 사용
- SRAM : 캐쉬 메모리에 주로 사용 Refresh가 필요 x 
 SRAM, NVRAM

======================================================
4주차 : Open Source Hardware(OSHW)
누구나 디자인이나 디자인에 근거한 하드웨어를 배우고, 수정하고, 배포하고, 제조하고 팔 수 있는 디자인이 공개된 하드웨어

오픈소스를 공개한다 = 설계도를 공개한다. = 변형이 가능하다.

Raspberri Pi : 싱글 보드 컴퓨터 CPU, memory, 입출력 단자 존재

- SoC ( System on Chip)
여러 가지 기능을 하나의 칩으로 만든 것으로 CPU, GPU, DSP, USB constroller, power 포함
- Memory 
컴퓨터에서 자료를 일시적으로 or 영구히 보존하는 장치로, 메인 메모리(RAM)와 2차 저장소(SD Card)로 나눌수 있음, 

-GPIO (General Purpose Input Output) Pin : 범위용 IO
GPIO Pin은 범용 입출력을 위해 사용되는 Pin, 2열로 배치된 40개의 핀


WiringPi 라이브러리 : Raspverry Pi 통신을 제어할 수 있는 함수를 제공하며 GPIO포트에 대한 설정 및 프로그래밍을 가능하게함
=======================================================
5주차 : Embedded System Bakground

전압(Voltage) : 전하를 흐르게 하는 힘
전류(Electric current) : 전하의 흐름으로, 단위 시간 동안 흐른 전하의 량
저항(Resistnce) : 물질이 전류의 흐름을 감소시키는 능력

전류 : I
전압 : V
저항 : R
V = I * R

키르히호프 법칙
제 1법칙(전류법칙)
- 접속점에 흘러드는 전류의 합과 접속점에서 흘러나오는 전류의 합은 같다.
제 2법칙(전압법칙)
- 폐쇄 회로의 기전력 합은 그 폐회로 내의 전압 강하의 합과 같다.
V = 기진력(전원의 전압)
전압 강하 : 부하에 거리는 전압
부하 : 저항

전하 : 물질의 물리적 특성, 양전하/음전하 존재, 물과 같음



Resistor(저항기)
고정 저항기 : 저항 값이 고정된 저항
가변 저항기 : 저항 값을 임의로 바꿀 수 있는 저항
                       가변 저항기는 3개의 핀을가짐

Sensors : 물리적 환경에서 특정 타입의 입력을 감지하고 이에 응답하는 장치
Actutors : 여러가지 동력을 이용하여 시스템을 움직이거나 제어하는데 사용되는 기계 장치


PIR 센서
동작 방식 - 두가지 판이 인식하는 적외선 양을 비교하여 움직임을 감지
평상시는 Low상태였다가 감지되면 High 감지되면 2.5초동안 감지하지 않는다.
두가지 노란색이 1. 감도 조절, 2. 시간 지연 조절


===================================================
6주차 : Embedded System Communications

임베디드 시스템에서의 통신
- 임베디드 시스템의 각 구성요소는 서로 통신
- 공통의 디지털 통신 protocol 및 standard 필요

임베디드 시스템에서 주로 사용되는 두 가지 통신타입
- 병렬 통신( Parallel communication) : 쉬운 구현, 빠른 전송 속도
     ㄴ Bit 대역만큼의 데이터 라인을 사용
- 직렬 통신( Serial communiation ) : 한번에 하나의 bit 전송 -> 라인이 하나기 때문에
      ㄴ 최대한 적은 수의 라인을 통해서 동작. 보통 4개 라인을 넘지 않음, 보통 UART, SPI, I2C와 같은 시리얼 통신지원하는하드웨어 모듈을 내장1
      ㄴ Synhronous SC ( 동기식 SC ) = > 서로 연관성이 높고, 비독립적
                          ㄴ 클록신호와 맞춤, 장치들은 한 클록이 지날떄 마다 1bit 데이터를 교환
      ㄴ Asynchronous SC ( 비동기식 SC ) = > 연관성이 낮고, 독립적
                          ㄴ 명시적인 clock 신호를 없애고 UART를 사용하여 박자를 맞춘다.

SC 타입
- Simplex (단방향)
데이터가 한 방향으로만 전송 가능 ex)라디오 방송국
- Half Duplex (반이중)
데이터가 양 방향으로 전송 가능(동시에 양방향 전송은 불가능) ex) 무전기
- Full Duplex (전이중)
양 방향으로 동시에 전송 가능 ex) 전화


===================================================
Embedded System Communications (2) : UART

Universal Asynchronous Receiver/Transmitter ( 보편적인 비동기식 수신기/송신기)
Asynchronous(비동기)
UART : 비동기 시리얼 통신을위한규약으로, 병렬 데이터를 입력받아 직렬화하여 통신하는 방법
clock이라는 애가 존재x, baud rate 로 조절
8bit(기본설정->변경가능) 비동기 직렬 통신을 지원하는 인터페이스 역할
병렬로 받아 직렬로 연결한다
동기화를 위한 별도의 clock이 없음

UART 구성
- TX, RX, GND 3개의 선만으로 통신을수행

Frame structure (핵심주요내용)
- TX -> RX
-  Frame 을 보낸다. (Frame = 데이터를 보내는 단위)
- start bit, stop bit, data bits, parity bit로 구성
- Synchronization bits ( 동기 비트) : Start bit와 Stop bit, 
                  ㄴ stopbits는 다음 프레임과의시간 간격을위해 1~2bit를 사용
- parity bit : 데이터 전달 과정에서 오류가 발생했는지 검사하기 위해 추가됨

양쪽의스펙이 다르더라도 UART는 비동기식 통신이기 떄문에 미리약속된 통신 속도로 전송해야 수신측에서 저오학히 데이터를 읽을 수 있다.
송수신 장치 양측의 baud rate을 같게 설정하여 통신속도를 맞춤
이래야지 frame을 맞춰야 한다.



